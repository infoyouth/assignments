name: 🐍 Python Workflow

on:
  push:
    paths:
      - 'python/**'

jobs:
  python_checks:
    name: 💻 Python Checks
    runs-on: ubuntu-latest

    steps:
      - name: 📥 Checkout repository
        uses: actions/checkout@v2

      - name: 🐍 Set up Python
        uses: actions/setup-python@v2
        with:
          python-version: '3.x'

      - name: 📦 Install dependencies
        run: |
          pip install flake8 mypy black bandit
          if [ -f requirements.txt ]; then pip install -r requirements.txt; fi

      - name: 🚦 Lint Python code
        id: lint
        run: |
          flake8 python --count --statistics || echo "::error title=Linting failed::Linting issues found"
        continue-on-error: false

      - name: 📝 Type check Python code
        id: typecheck
        run: |
          mypy python || echo "::error title=Type checking failed::Type checking issues found"
        continue-on-error: false

      - name: 🖌️ Format Python code with Black
        id: format
        run: |
          black --check --diff python || echo "::error title=Formatting failed::Formatting issues found"
        continue-on-error: false

      - name: 🔒 Security check with Bandit
        id: security
        run: |
          bandit -r python || echo "::error title=Security check failed::Security issues found"
        continue-on-error: false
